(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[5,9],{102:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return s}));var r=a(93),n=a(96),c=a(1);function s(e){var t=e.message;return Object(c.jsx)(r.a,{text:t,children:Object(c.jsx)(n.a,{})})}},108:function(e,t,a){"use strict";t.a=a.p+"static/media/default_backdrop.5312a185.jpg"},109:function(e,t,a){"use strict";a(0);var r=a(6),n=a(110),c=a.n(n),s=a(1);t.a=function(e){var t=e.movieID,a=e.backdrop,n=e.title,o=e.rating,i=e.releaseDate,u=e.cbOnClick;return Object(s.jsx)("li",{className:c.a.item,onClick:function(){return u(t)},children:Object(s.jsx)(r.b,{to:"/movies/".concat(t),className:c.a.Link,children:Object(s.jsxs)("article",{className:c.a.card,children:[Object(s.jsx)("img",{className:c.a.cardImage,src:a,alt:n}),Object(s.jsxs)("div",{className:c.a.cardContent,children:[Object(s.jsx)("h2",{className:c.a.movieName,children:n}),Object(s.jsxs)("p",{className:c.a.movieRating,children:[" Rating: ",o," "]}),Object(s.jsxs)("p",{className:c.a.movieReleaseDate,children:["Movie released at: ",i]})]})]})})})}},110:function(e,t,a){e.exports={item:"GalleryItem_item__2yA08",Link:"GalleryItem_Link__1wj65",card:"GalleryItem_card__3Uqpj",cardContent:"GalleryItem_cardContent__RqBAy",cardImage:"GalleryItem_cardImage__1yBX9",movieName:"GalleryItem_movieName__1TFU0",movieRating:"GalleryItem_movieRating__19GP1"}},141:function(e,t,a){e.exports={SearchBar:"SearchForm_SearchBar__2j8Dh",SearchForm:"SearchForm_SearchForm__2490l",SearchFormBtn:"SearchForm_SearchFormBtn__13NJu",SearchFormBtnLabel:"SearchForm_SearchFormBtnLabel__W1Wgz",SearchFormInput:"SearchForm_SearchFormInput__2M71k"}},168:function(e,t,a){"use strict";a.r(t);var r=a(99),n=a(98),c=a(0),s=a(122),o=a(94),i=a(108),u=a(102),l=a(16),b=a(93),m=a(142),h=a.n(m),p=a(141),j=a.n(p),f=a(1);var d=function(e){var t=e.onSubmit,a=Object(c.useState)(""),r=Object(n.a)(a,2),s=r[0],o=r[1];return Object(f.jsx)("div",{className:j.a.SearchBar,children:Object(f.jsxs)("form",{className:j.a.SearchForm,onSubmit:function(e){e.preventDefault(),""!==s.trim()?(t(s,1),console.log("SEARCH_FORM submit :>> ",s),o("")):alert("Enter query before submit")},children:[Object(f.jsxs)("button",{type:"submit",className:j.a.SearchFormBtn,children:[Object(f.jsx)(h.a,{}),Object(f.jsx)("span",{className:j.a.SearchFormBtnLabel,children:"Search"})]}),Object(f.jsx)("input",{className:j.a.SearchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies...",value:s,name:"query",onChange:function(e){var t=e.target,a=t.name,r=t.value;"query"===a&&o(r.trim())}})]})})},v=a(109),x="idle",O="pending",g="resolved",_="rejected";t.default=function(e){var t=e.history,a=Object(c.useState)(""),m=Object(n.a)(a,2),h=m[0],p=m[1],j=Object(c.useState)(1),k=Object(n.a)(j,2),y=k[0],S=k[1],w=Object(c.useState)([]),N=Object(n.a)(w,2),F=N[0],B=N[1],C=Object(c.useState)(0),I=Object(n.a)(C,2),L=I[0],E=I[1],q=Object(c.useState)(x),G=Object(n.a)(q,2),R=G[0],D=G[1],P=Object(c.useState)(null),T=Object(n.a)(P,2),A=T[0],M=T[1],U=Object(c.useState)(""),W=Object(n.a)(U,2),H=W[0],J=W[1],Y=Object(c.useState)(0),z=Object(n.a)(Y,2),K=z[0],X=z[1],Z=Object(c.useState)(""),Q=Object(n.a)(Z,2),V=Q[0],$=Q[1],ee=t.push,te=t.location;Object(c.useEffect)((function(){""!==te.search?(p(new URLSearchParams(te.search).get("query")),S(Number(new URLSearchParams(te.search).get("page"))+1)):J("Enter your query to search movies!")}),[]),Object(c.useEffect)((function(){h&&(D(O),null===te.state?($('Loading movies with name "'.concat(h,'"')),Object(o.e)(y,h).then((function(e){if(0===e.total_results)throw new Error("we couldn't find any results for \"".concat(h,'"'));B(e.results),E(e.total_pages),D(g),J("We had found ".concat(e.total_results,' movies by "').concat(h,'" ')),S(y+1),te.search="query=".concat(h,"&page=").concat(y),ee("/movies?"+te.search)})).catch((function(e){D(_),M(e.message)}))):(B(te.state.movies),X(te.state.pageScrollHeight),E(te.state.totalPages),J(te.state.titleText),D(g)))}),[h]),Object(c.useEffect)((function(){window.scrollTo({top:K,behavior:"smooth"})}),[K]);var ae=function(e,t){te.search="query=".concat(e,"&page=").concat(t),te.state=null,p(e),S(t),E(0),X(0),B([])},re=function(e){ee({state:{from:te},pathname:"/movies/"+e}),te.state={movies:F,pageScrollHeight:document.documentElement.scrollTop,totalPages:L,titleText:H}};return R===x?Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(b.a,{text:H,children:Object(f.jsx)(d,{onSubmit:ae})})}):R===g||R===O?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(b.a,{text:H}),Object(f.jsx)(d,{onSubmit:ae}),F.length>0&&Object(f.jsx)(s.a,{dataLength:F.length,next:function(){D(O),$("Loading ".concat(y," page")),Object(o.e)(y,h).then((function(e){var t=e.results;B([].concat(Object(r.a)(F),Object(r.a)(t))),D(g),te.search="query=".concat(h,"&page=").concat(y),ee("/movies?"+te.search),S(y+1)})).catch((function(e){D(_),M(e)}))},hasMore:L>=y,loader:Object(f.jsx)("h4",{children:"Loading..."}),endMessage:Object(f.jsx)("p",{style:{textAlign:"center"},children:Object(f.jsx)("b",{children:"Yay! You have seen it all"})}),children:Object(f.jsx)("ul",{className:"moviesList",id:"moviesList",children:F.map((function(e){var t=e.id,a=e.backdrop_path,r=e.original_title,n=e.vote_average,c=e.release_date,s=a?"https://image.tmdb.org/t/p/w780/".concat(a):i.a;return Object(f.jsx)(v.a,{backdrop:s,title:r,rating:n,releaseDate:c,movieID:t,cbOnClick:re},t)}))})}),R===O&&Object(f.jsx)(l.a,{title:V})]}):R===_?Object(f.jsx)(u.default,{message:A}):void 0}},93:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a(95),n=a.n(r),c=a(1);function s(e){var t=e.text,a=e.children;return Object(c.jsxs)("div",{className:n.a.titleContainer,children:[Object(c.jsx)("h1",{className:n.a.title,children:t}),a]})}},94:function(e,t,a){"use strict";a.d(t,"d",(function(){return u})),a.d(t,"e",(function(){return b})),a.d(t,"b",(function(){return h})),a.d(t,"a",(function(){return j})),a.d(t,"c",(function(){return d}));var r=a(105),n=a.n(r),c=a(106),s=a(107),o=a.n(s),i="12ae81efe6e825dc1785f3d595e1c6cf";function u(e){return l.apply(this,arguments)}function l(){return(l=Object(c.a)(n.a.mark((function e(t){var a,r,c,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"trending/movie/week",a="?api_key=".concat(i,"&page=").concat(t),r="trending/movie/week"+a,e.prev=3,e.next=6,o.a.get(r);case 6:if(c=e.sent,s=c.data,400!==c.status){e.next=10;break}throw new Error;case 10:if(200!==c.status){e.next=12;break}return e.abrupt("return",s);case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(3),e.abrupt("return",e.t0.status_message);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}function b(e,t){return m.apply(this,arguments)}function m(){return(m=Object(c.a)(n.a.mark((function e(t,a){var r,c,s,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"search/movie",r="?api_key=".concat(i,"&page=").concat(t,"&query=").concat(a),c="search/movie"+r,e.prev=3,e.next=6,o.a.get(c);case 6:if(s=e.sent,u=s.data,400!==s.status){e.next=10;break}throw new Error;case 10:if(200!==s.status){e.next=12;break}return e.abrupt("return",u);case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(3),e.abrupt("return",e.t0.status_message);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}function h(e){return p.apply(this,arguments)}function p(){return(p=Object(c.a)(n.a.mark((function e(t){var a,r,c,s,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="movie/".concat(t),r="?api_key=".concat(i),c=a+r,e.prev=3,e.next=6,o.a.get(c);case 6:if(s=e.sent,u=s.data,400!==s.status){e.next=10;break}throw new Error;case 10:if(200!==s.status){e.next=12;break}return e.abrupt("return",u);case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(3),e.abrupt("return",e.t0.status_message);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}function j(e){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(n.a.mark((function e(t){var a,r,c,s,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="movie/".concat(t,"/credits"),r="?api_key=".concat(i),c=a+r,e.prev=3,e.next=6,o.a.get(c);case 6:if(s=e.sent,u=s.data.cast,400!==s.status){e.next=10;break}throw new Error;case 10:if(200!==s.status){e.next=12;break}return e.abrupt("return",u);case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(3),e.abrupt("return",e.t0.status_message);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}function d(e){return v.apply(this,arguments)}function v(){return(v=Object(c.a)(n.a.mark((function e(t){var a,r,c,s,u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="movie/".concat(t,"/reviews"),r="?api_key=".concat(i),c=a+r,e.prev=3,e.next=6,o.a.get(c);case 6:if(s=e.sent,u=s.data.results,400!==s.status){e.next=10;break}throw new Error;case 10:if(200!==s.status){e.next=12;break}return e.abrupt("return",u);case 12:e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(3),e.abrupt("return",e.t0.status_message);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}o.a.defaults.baseURL="https://api.themoviedb.org/3/"},95:function(e,t,a){e.exports={title:"PageTitle_title__1ACpZ",titleContainer:"PageTitle_titleContainer__BObiw"}},96:function(e,t,a){"use strict";var r=a(2),n=a(97),c=a.n(n),s=a(1);t.a=function(){var e=Object(r.g)(),t=e.push,a=e.location;return Object(s.jsx)("button",{className:c.a.button,type:"button",onClick:function(){var e;return t((null===(e=a.state)||void 0===e?void 0:e.from)||"/")},children:"GO BACK"})}},97:function(e,t,a){e.exports={button:"GoBackBtn_button__1sl9N","hvr-button":"GoBackBtn_hvr-button__3EWD6"}}}]);
//# sourceMappingURL=5.a5d6d730.chunk.js.map